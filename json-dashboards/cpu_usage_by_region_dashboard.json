{
  "uid" : "cpu-usage-by-region",
  "title" : "CPU Usage by Region Dashboard",
  "tags" : [ "cpu", "demo", "region" ],
  "timezone" : "browser",
  "editable" : true,
  "graphTooltip" : 0,
  "time" : {
    "from" : "now-15m",
    "to" : "now"
  },
  "fiscalYearStartMonth" : 0,
  "refresh" : "5s",
  "schemaVersion" : 41,
  "panels" : [ {
    "type" : "gauge",
    "targets" : [ {
      "expr" : "cpu_usage{instance=\"server1\", region=\"$region\"}",
      "refId" : "A",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      }
    } ],
    "title" : "CPU Usage (server1 - ${region})",
    "transparent" : false,
    "gridPos" : {
      "h" : 8,
      "w" : 8,
      "x" : 0,
      "y" : 0
    },
    "fieldConfig" : {
      "defaults" : {
        "min" : 0.0,
        "max" : 100.0,
        "thresholds" : {
          "mode" : "percentage",
          "steps" : [ {
            "color" : "green"
          }, {
            "value" : 80.0,
            "color" : "yellow"
          }, {
            "value" : 90.0,
            "color" : "red"
          } ]
        }
      },
      "overrides" : [ ]
    }
  }, {
    "type" : "gauge",
    "targets" : [ {
      "expr" : "cpu_usage{instance=\"server2\", region=\"$region\"}",
      "refId" : "A",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      }
    } ],
    "title" : "CPU Usage (server2 - ${region})",
    "transparent" : false,
    "gridPos" : {
      "h" : 8,
      "w" : 8,
      "x" : 8,
      "y" : 0
    },
    "fieldConfig" : {
      "defaults" : {
        "min" : 0.0,
        "max" : 100.0,
        "thresholds" : {
          "mode" : "percentage",
          "steps" : [ {
            "color" : "green"
          }, {
            "value" : 80.0,
            "color" : "yellow"
          }, {
            "value" : 90.0,
            "color" : "red"
          } ]
        }
      },
      "overrides" : [ ]
    }
  }, {
    "type" : "gauge",
    "targets" : [ {
      "expr" : "cpu_usage{instance=\"server3\", region=\"$region\"}",
      "refId" : "A",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      }
    } ],
    "title" : "CPU Usage (server3 - ${region})",
    "transparent" : false,
    "gridPos" : {
      "h" : 8,
      "w" : 8,
      "x" : 16,
      "y" : 0
    },
    "fieldConfig" : {
      "defaults" : {
        "min" : 0.0,
        "max" : 100.0,
        "thresholds" : {
          "mode" : "percentage",
          "steps" : [ {
            "color" : "green"
          }, {
            "value" : 80.0,
            "color" : "yellow"
          }, {
            "value" : 90.0,
            "color" : "red"
          } ]
        }
      },
      "overrides" : [ ]
    }
  }, {
    "type" : "timeseries",
    "targets" : [ {
      "expr" : "cpu_usage{region=\"$region\"}",
      "legendFormat" : "{{instance}}",
      "refId" : "A",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      }
    } ],
    "title" : "CPU Usage Over Time (${region})",
    "transparent" : false,
    "gridPos" : {
      "h" : 8,
      "w" : 24,
      "x" : 0,
      "y" : 8
    },
    "fieldConfig" : {
      "defaults" : {
        "min" : 0.0,
        "max" : 100.0
      },
      "overrides" : [ ]
    }
  }, {
    "type" : "barchart",
    "targets" : [ {
      "expr" : "cpu_usage{region=\"$region\"}",
      "legendFormat" : "{{instance}}",
      "refId" : "A",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      }
    } ],
    "title" : "CPU Usage by Instance (${region})",
    "transparent" : false,
    "gridPos" : {
      "h" : 8,
      "w" : 24,
      "x" : 0,
      "y" : 16
    }
  } ],
  "templating" : {
    "list" : [ {
      "type" : "query",
      "name" : "region",
      "label" : "Region",
      "skipUrlSync" : false,
      "query" : "label_values(cpu_usage, region)",
      "datasource" : {
        "type" : "prometheus",
        "uid" : "prometheus"
      },
      "multi" : false,
      "allowCustomValue" : true,
      "refresh" : 2,
      "sort" : 1,
      "includeAll" : false,
      "auto" : false,
      "auto_min" : "10s",
      "auto_count" : 30
    } ]
  },
  "annotations" : { }
}